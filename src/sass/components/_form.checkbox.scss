/**
 * Component Form/Checkbox.
 * @author David Sklar <david.sklar@datasapiens.co.uk>
 *
 * @requires {function}    px-to-em
 * @requires {mixin}       size
 * @requires {mixin}       stretch
 * @requires {placeholder} %form-element
 * @requires {placeholder} %ico
 * @requires {placeholder} %ico--checkmark
 * @requires {variable}    $animation-easing
 * @requires animation.scale
 * @requires form.element
 * @requires ico
 */

// =============================================================================
// Form checkbox
// =============================================================================

.form-checkbox {
    align-items: baseline;
    display: inline-flex;
}

/**
 * Modifiers.
 */

// .component--modifier {}

// .component {
//     &.--modifier {}
// }

/**
 * States.
 */

/**
 * Form checkbox, disabled.
 */

.form-checkbox {
    :disabled ~ &__shape {
        border-color: currentColor !important;
        color: map-get($form-checkbox-color, disable) !important;
        cursor: not-allowed;
    }
}

/**
 * Form checkbox, focused.
 */

.form-checkbox {
    :focus:not(:disabled):not([readonly])  ~ &__shape,
    .is-focused:not(:disabled):not([readonly])  ~ &__shape {
        border-color: currentColor;
        color: map-get($form-checkbox-color, focus);
    }
}

/**
 * Form checkbox, hovered.
 */

.form-checkbox {
    :not(:disabled):not([readonly]) ~ &__shape:hover,
    :hover:not(:disabled):not([readonly])  ~ &__shape {
        border-color: currentColor;
        color: map-get($form-checkbox-color, hover);
    }
}

/**
 * Form checkbox, checked.
 */

.form-checkbox {
    :checked ~ &__shape {
        color: map-get($form-checkbox-color, active);

        &::before {
            @extend %form-checkbox__shape:active;
        }
    }
}

/**
 * Form checkbox, read-only.
 */

.form-checkbox {
    [readonly] ~ &__shape {
        border-color: currentColor;
        color: map-get($form-checkbox-color, disable) !important;
        cursor: not-allowed;
    }
}

/**
 * Context.
 */

// .has-component {}

// =============================================================================
// Subcomponents
// =============================================================================

// Form checkbox control
// =============================================================================

.form-checkbox__control {
    @include size(px-to-em($form-checkbox-size));

    display: inherit;
    position: relative;

    &:not(:only-child) {
        $indent: px-to-em($form-checkbox-indent);

        &:first-child {
            margin: {
                right: $indent;
            }
        }
        &:last-child {
            margin: {
                left: $indent;
            }
        }
    }
}

// Form checkbox shape
// =============================================================================

.form-checkbox__shape {
    @extend %form-element !optional;
    @include size(100%);

    align-items: center;
    background: map-get($form-checkbox-background, initial);
    border-color: currentColor;
    color: map-get($form-checkbox-color, initial);
    display: inline-flex;
    font-size: 1em;
    justify-content: center;
    padding: 0;

    &::before {
        @extend %form-checkbox__shape;
    }
}

%form-checkbox__shape {
    @extend %ico !optional;
    @extend %ico--checkmark !optional;

    opacity: 0;
    transform: scale(1.5, 1.5);
    transition:
        opacity 0.2s 0.1s,
        transform map-get($animation-easing, in-out-circ) 0.3s;
}

/**
 * States.
 */

/**
 * Form checkbox shape, active.
 */

%form-checkbox__shape {
    &:active {
        opacity: 1;
        transform: scale(1.0, 1.0);
    }
}

// Form checkbox label
// =============================================================================

// .form-checkbox__label {}
