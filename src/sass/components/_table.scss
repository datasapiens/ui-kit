/**
 * Component Table.
 *
 * @requires {function}    px-to-em
 * @requires {mixin}       size
 * @requires {mixin}       stretch
 * @requires {placeholder} %form-element
 * @requires {placeholder} %ico
 * @requires {placeholder} %ico--checkmark
 * @requires {variable}    $animation-easing
 * @requires animation.scale
 * @requires form.element
 * @requires ico
 */

// =============================================================================
// Table
// =============================================================================

.tbl {
    border-radius: $table-border-radius;
    font-size: px-to-rem($table-font-size);
    line-height: $table-line-height-ratio;

    caption {
        padding: {
            left: 2 * $table-cell-indent;
            right: 2 * $table-cell-indent;
        }
    }
    td,
    th {
        padding: {
            bottom: 0.75 * $table-cell-indent;
            left: $table-cell-indent;
            right: $table-cell-indent;
            top: 0.75 * $table-cell-indent;
        }
        transition: background-color 0.2s;
        vertical-align: baseline;
    }

    tr {
        &:first-child {
            td,
            th {
                &:first-child {
                    border-top: {
                        left-radius: $table-border-radius;
                    }
                }
                &:last-child {
                    border-top: {
                        right-radius: $table-border-radius;
                    }
                }
            }
        }
    }

    thead {
        border-top: {
            left-radius: $table-border-radius;
            right-radius: $table-border-radius;
        }
        th {
            font-size: 0.9em;
        }
    }

    tbody {
        tr:last-child {
            td,
            th {
                &:first-child {
                    border-bottom: {
                        left-radius: $table-border-radius;
                    }
                }
                &:last-child {
                    border-bottom: {
                        right-radius: $table-border-radius;
                    }
                }
            }
        }
    }

    thead + tbody {
        tr:first-child {
            td,
            th {
                &:first-child,
                &:last-child {
                    border-radius: 0;
                }
            }
        }
    }

    // Apply selected properties.
    &:not(.--rack) {
        background-color: rgba(map-get($table-background, body), 0.25);

        tbody {
            background-color: map-get($table-background, body);
        }

        @if map-get($table-background, head) != map-get($table-background, body) {
            thead {
                background-color: map-get($table-background, head);
            }
        }

        box-shadow: $table-box-shadow;
        // padding: $table-cell-indent;
    }

    &:not(.--compact):not(.--edge):not(.--rack) {
        tbody {
            // box-shadow: $table-box-shadow;
        }
    }
}

/**
 * Modifiers.
 */

/**
 * Table, layout auto.
 */

.tbl {
    &.--auto {
        table-layout: auto;
    }
}


/**
 * Table, background.
 */

%tbl--background {
    background-color: $blue--catskill;
}

/**
 * Table, vertical lines (aka bars).
 */

%tbl--bar {
    @extend %tbl--background;

    border-spacing: 1px 0;
}

.tbl {
    &.--bar {
        @extend %tbl--bar;
    }
}

/**
 * Table, cell content horizontaly centered.
 */

.tbl {
    &.--center {
        td,
        th {
            text-align: center;
        }
    }
}

/**
 * Table, compact.
 */

%tbl--compact {
    caption {
        padding: {
            left: 1.5 * $table-cell-indent;
            right: 1.5 * $table-cell-indent;
        }
    }
    td,
    th {
        padding: 0.5 * $table-cell-indent;
        // padding: {
        //     bottom: 0.35 * $table-cell-indent;
        //     left: 0.5 * $table-cell-indent;
        //     right: 0.5 * $table-cell-indent;
        //     top: 0.35 * $table-cell-indent;
        // }
    }
}

.tbl {
    &.--compact {
        @extend %tbl--compact;
    }
}

/**
 * Table, edge (aka border).
 */

%tbl--edge {
    border:
        $table--edge-border-size
        solid
        $table--edge-border-color;
}

.tbl {
    &.--edge {
        @extend %tbl--edge;
    }
}

/**
 * Table, layout fixed.
 */

.tbl {
    &.--fix {
        table-layout: fixed;
    }
}

/**
 * Table, grid (aka bars and lines combo).
 */

%tbl--grid {
    @extend %tbl--background;

    border-spacing: 1px;
}

.tbl {
    &.--grid {
        @extend %tbl--grid;
    }
}

/**
 * Table, horizontal lines.
 */

%tbl--line {
    @extend %tbl--background;

    border-spacing: 0 1px;
}

.tbl {
    &.--line {
        @extend %tbl--line;
    }
}

/**
 * Table, cell content verticaly centered.
 */

.tbl {
    &.--middle {
        td,
        th {
            vertical-align: middle;
        }
    }
}

/**
 * Table, rack (aka container).
 */

%tbl--rack {
    caption,
    td,
    th {
        &:first-child {
            padding-left: 0;
        }
        &:last-child {
            padding-right: 0;
        }
    }
}

.tbl {
    &.--rack {
        @extend %tbl--rack;
    }
}

/**
 * Table, cell content aligned to right.
 */

.tbl {
    &.--right {
        td,
        th {
            text-align: right;
        }
    }
}

/**
 * Table, stripes.
 */

.tbl {
    &.--stripe {
        &.--even {
            tbody {
                tr:nth-child(even) {
                    background-color: $blue--catskill;
                }
            }
        }
        &.--odd {
            tbody {
                tr:nth-child(odd) {
                    background-color: $blue--catskill;
                }
            }
        }
    }
}



/**
 * Table variants placeholder.
 */

%tbl--master {
    // color: inherit;
    // overflow: hidden;
}

/**
 * Table, primary.
 */

.tbl {
    &.--primary {
        // @extend %tbl--master;
        @extend %tbl--edge;
        @extend %tbl--grid;

        // background-color: map-get($table--primary-background, body);

        // thead {
        //     background-color: map-get($table--primary-background, head);
        // }

        &:not(.--rack) {
            padding: $table-cell-indent;
        }
    }
}

/**
 * Table, secondary.
 */

.tbl {
    &.--secondary {
        // @extend %tbl--master;
    }
}

/**
 * States.
 */

/**
 * Table, active.
 */

.tbl {
    &.is-active {
        tbody {
            tr:hover {
                cursor: pointer;

                td,
                th {
                    // background-color: $blue--malibu;
                    background-color: rgba($green--dolly, 0.5);
                }
            }
        }
    }
}

/**
 * Context.
 */

// .has-component {}

// =============================================================================
// Subcomponents
// =============================================================================

// Table column
// =============================================================================

.tbl__column {}

/**
 * Modifiers.
 */

/**
 * Table column, bold.
 */

.tbl__column {
    &.--bold {
        background-color: rgba($table-row--bold-background, 0.25);
    }
}

// Table row
// =============================================================================

.tbl__row {}

/**
 * Modifiers.
 */

/**
 * Table row, bold.
 */

.tbl__row {
    &.--bold {
        td,
        th {
            background-color: rgba($table-row--bold-background, 0.25);
        }
    }
}

// Table cell
// =============================================================================

.tbl__cell {}

/**
 * Modifiers.
 */

/**
 * Table cell, bold.
 */

.tbl__cell {
    &.--bold {
        background-color: rgba($table-row--bold-background, 0.25);

        // $parent: #{&};

        // @at-root {
        //     .tbl.--primary {
        //         thead #{$parent} {
        //             background-color: map-get(
        //                 $table--primary-cell--bold-background,
        //                 head
        //             );
        //         }
        //         tbody #{$parent} {
        //             background-color: map-get(
        //                 $table--primary-cell--bold-background,
        //                 body
        //             );
        //         }
        //     }
        // }
    }
}
